(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e984dac2","chunk-5955c6c9"],{"2bfe":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movie-detail"},[i("div",{staticClass:"cover",style:t.cover}),i("div",{staticClass:"detail"},[i("div",{staticClass:"poster"},[i("img",{attrs:{src:t.poster,alt:""}}),t._t("video")],2),i("div",{staticClass:"content"},[i("div",{staticClass:"title ellipsis"},[t._v(t._s(t.detail.nm))]),i("div",{staticClass:"p1 ellipsis"},[t._v(t._s(t.detail.enm))]),i("div",{staticClass:"score ellipsis p1"},[t._t("movie-score"),t.detail.globalReleased?i("span",{staticClass:"p1"},[t._v("（"+t._s(t.num)+"万人评）")]):t._e(),t.detail.globalReleased?t._e():i("span",[t._v(t._s(t.detail.snum)+"人想看")])],2),i("div",{staticClass:"p1 ellipsis"},[t._v(t._s(t.detail.cat))]),i("div",{staticClass:"p1 ellipsis"},[t._v(t._s(t.detail.src))]),i("div",{staticClass:"p1 ellipsis"},[t._v(t._s(t.detail.pubDesc))])]),t.link?i("router-link",{staticClass:"arrow-right",attrs:{to:"/movie/"+t.detail.id}},[i("i",{staticClass:"iconfont icon-arrow-right"})]):t._e()],1)])},a=[],n=(i("7f7f"),i("e814")),c=i.n(n),r=i("4260"),l={data:function(){return{scores:[],fullStar:"//s0.meituan.net/bs/?f=react-canary:/img/star-full-new.png",half:"//s0.meituan.net/bs/?f=react-canary:/img/star-half-new.png",white:"//s0.meituan.net/bs/?f=react-canary:/img/star-empty-new.png"}},props:{detail:{type:Object,default:function(){return{}}},link:{type:Boolean,default:!0}},computed:{cover:function(){return{backgroundImage:"url(".concat(this.setSize("71.100"),")")}},poster:function(){return this.setSize("148.208")},num:function(){return c()(this.detail.snum/1e4)},stars:function(){var t=c()(this.detail.sc),e=t-this.detail.sc>.5?1:0,i=10-t;return this.scores.slice(i-e,6)}},created:function(){var t=this.fullStar,e=this.half,i=this.white,s=[t,t,t,t,t],a=[i,i,i,i,i];this.scores=s.concat(e,a),this.show="cinema_movie"!==this.$route.name},methods:{setSize:function(t){return Object(r["d"])(this.detail.img||"")(t)}}},o=l,d=(i("c08b"),i("2877")),u=Object(d["a"])(o,s,a,!1,null,"2fd3e877",null);e["a"]=u.exports},3997:function(t,e,i){"use strict";var s=i("f7f1"),a=i.n(s);a.a},"3a05":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page",class:{fixed50:t.changeSelect}},[i("Navbar",{attrs:{title:t.detail.nm}}),i("MovieDetail",{directives:[{name:"show",rawName:"v-show",value:t.detail.nm,expression:"detail.nm"}],attrs:{detail:t.detail}},[t.detail.globalReleased?i("span",{staticClass:"num",attrs:{slot:"movie-score"},slot:"movie-score"},[t._v(t._s(t.detail.sc))]):t._e()]),i("div",{ref:"fixedConetnt",staticClass:"choose",class:{fixed:t.isFixed}},[i("Date",{attrs:{dates:t.dates}}),t.filters.brand?i("SelectPanel",{attrs:{filters:t.filters},on:{change:t.changeSelection}}):t._e()],1),t.loading&&t.empty?i("NoData"):t._e(),i("div",{staticClass:"list"},t._l(t.cinemas,function(t){return i("cinema-item",{key:t.id,attrs:{cinema:t}})}),1),i("infinite-loading",{on:{infinite:t.infiniteHandler}})],1)},a=[],n=i("cebc"),c=i("365c"),r=i("84df"),l=i("bde8"),o=i("2bfe"),d=i("e9e7"),u=i("99a8"),f=i("8e01"),h=i("8355"),v=i("2f62"),m={data:function(){return{loading:!0,movieId:0,filters:{},dates:[],detail:{},offsetHeight:0,isFixed:!1,handleThottle:null,cinemaList:[],changeSelect:""}},computed:Object(n["a"])({},Object(v["d"])(["cinemas","city"]),{empty:function(){var t=this.cinemas||[];return!t.length}}),methods:Object(n["a"])({},Object(v["b"])(["postMovie"]),Object(v["c"])(["changeFilter","emptyCinemaList","resetFilter"]),{infiniteHandler:function(t){var e=this;this.loading&&this.postMovie({movieId:this.movieId,updateShowDay:!0,cityId:this.city.id}).then(function(i){var s=i.paging;e.loading=!0,e.dates.length||(e.dates=i.showDays.dates),s.hasMore?(e.changeFilter({offset:s.offset+s.limit}),t.loaded()):t.complete()}),this.loading=!1},handleScroll:function(){var t=document.documentElement.scrollTop;this.isFixed=t>this.offsetHeight},changeSelection:function(t){this.changeSelect=t}}),mounted:function(){this.offsetHeight=this.$refs["fixedConetnt"].offsetTop},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},created:function(){var t=this,e=+this.$route.params.id;this.movieId=e,Object(c["h"])({params:{movieId:e}}).then(function(e){t.detail=e.detailMovie}),window.addEventListener("scroll",this.handleScroll);var i=Object(r["a"])();Object(c["e"])({params:{movieId:e,day:i}}).then(function(e){t.filters=e})},destroyed:function(){this.resetFilter(),this.emptyCinemaList()},components:{Navbar:l["a"],MovieDetail:o["a"],Date:d["default"],SelectPanel:u["a"],NoData:f["a"],CinemaItem:h["a"]}},p=m,g=(i("3997"),i("2877")),b=Object(g["a"])(p,s,a,!1,null,"6312e898",null);e["default"]=b.exports},"5d6b":function(t,e,i){var s=i("e53d").parseInt,a=i("a1ce").trim,n=i("e692"),c=/^[-+]?0[xX]/;t.exports=8!==s(n+"08")||22!==s(n+"0x16")?function(t,e){var i=a(String(t),3);return s(i,e>>>0||(c.test(i)?16:10))}:s},7445:function(t,e,i){var s=i("63b6"),a=i("5d6b");s(s.G+s.F*(parseInt!=a),{parseInt:a})},8386:function(t,e,i){},a1ce:function(t,e,i){var s=i("63b6"),a=i("25eb"),n=i("294c"),c=i("e692"),r="["+c+"]",l="​",o=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),u=function(t,e,i){var a={},r=n(function(){return!!c[t]()||l[t]()!=l}),o=a[t]=r?e(f):c[t];i&&(a[i]=o),s(s.P+s.F*r,"String",a)},f=u.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},aa17:function(t,e,i){"use strict";var s=i("c582"),a=i.n(s);a.a},b9e9:function(t,e,i){i("7445"),t.exports=i("584a").parseInt},c08b:function(t,e,i){"use strict";var s=i("8386"),a=i.n(s);a.a},c582:function(t,e,i){},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,i){t.exports=i("b9e9")},e9e7:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"days"},[i("ul",{staticClass:"content"},t._l(t.dates,function(e,s){return i("li",{key:e.date,staticClass:"day",class:t.currentIndex===s?"choosen":"",on:{click:function(i){return t.freshDate(e.date,s)}}},[t._v(t._s(e.date))])}),0)])},a=[],n=i("cebc"),c=i("2f62"),r={data:function(){return{currentIndex:0}},props:{dates:Array},methods:Object(n["a"])({},Object(c["c"])(["changeFilter"]),{freshDate:function(t,e){this.currentIndex=e,this.changeFilter({offset:0,day:t,districtId:-1}),this.$store.dispatch("getCinemaList")}})},l=r,o=(i("aa17"),i("2877")),d=Object(o["a"])(l,s,a,!1,null,"35e5a090",null);e["default"]=d.exports},f7f1:function(t,e,i){}}]);